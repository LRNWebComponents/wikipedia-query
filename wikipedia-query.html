<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">
<!--
`wikipedia-query`
A LRN element

@demo demo/index.html
-->

<dom-module id="wikipedia-query">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <h2>Results for {{search}}</h2>
    <div>
    <pre id="{{search}}">{{searchResult}}</pre>
    </div>
    <iron-ajax
       auto
       url$="https://en.wikipedia.org/w/api.php?origin=*&action=query&titles={{search}}&prop=extracts&format=json"
       handle-as="json"
       on-response="handleResponse"
       last-response="{{searchResult}}"></iron-ajax>
  </template>
  <script>
    Polymer({

      is: 'wikipedia-query',

      properties: {
        search: {
          type: String,
          value: 'Polymer (library)',
          reflectToAttribute: true,
          notify: true,
        },
        searchResult: {
          type: Object,
          notify: true,
        }
      },
      handleResponse: function(response) {
        console.dir(this.searchResult);
        //console.log(this.searchResults.query.pages.47583124);
        //this.$$('#pretag').innerHTML = this.searchResults.extract;
      }
    });
  </script>
</dom-module>
